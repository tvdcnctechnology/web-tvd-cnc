<!DOCTYPE HTML>
<html>
<head>
    <title>TVD-CNC</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

    <!-- Main CSS -->
    <link rel="stylesheet" href="assets/css/main.css" />

    <!-- Bootstrap CSS for table theme -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css">
</head>
<body class="is-preload">
    <div id='google_translate_element'></div>
    <div id="page-wrapper">

        <!-- Header -->
        <header id="header">
            <div class="logo container">
                <div>
                    <h1><a href="index.html" id="logo">TVD-CNC</a></h1>
                    <p>We cater to automotive, aerospace, robotics, and industrial equipment sectors.</p>
                </div>
            </div>
        </header>

        <!-- Nav -->
        <nav id="nav">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#aboutus">About Us</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </nav>

        <!-- Main -->
        <section id="main">
            <div class="container">
                <!-- CNC Table Section -->
                <section id="cnc-inventory" class="my-5">
                    <div class="container d-flex justify-content-center">
                        <div class="table-responsive" style="width:100%; max-width:1200px;">
                            <h2 class="text-center mb-4">CNC Machine Inventory</h2>
                            <table id="cncTable" class="table table-striped table-hover table-bordered align-middle">
                                <thead class="table-dark">
                                    <tr>
                                        <th></th>
                                        <th>Machine</th>
                                        <th>Type</th>
                                        <th>Controller</th>
                                        <th>Axis</th>
                                        <th>Status</th>
                                        <th>Price (THB)</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Example Content -->
                <div class="content">
                    <article class="box page-content">
                        <header>
                            <h2>Metal Magic, Mastered.</h2>
                            <p>We turn your wildest engineering dreams into tangible, high-precision metal realities. Fast.</p>
                        </header>

                        <section>
                            <span class="image featured"><img src="images/pic05.jpg" alt="" /></span>
                            <p>Your Vision, Our Machines. From concept to creation, we deliver accuracy you can bet your reputation on.</p>
                        </section>
                    </article>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer id="footer">
            <div class="container">
                <div class="row gtr-200">
                    <div class="col-12" id="aboutus">
                        <section>
                            <h2 class="major"><span>About Us</span></h2>
                            <p>Founded in 2025, we are a team of dedicated engineers and machinists passionate about pushing the boundaries of manufacturing. Our state-of-the-art facility and decades of combined experience guarantee exceptional results.</p>
                        </section>
                    </div>
                    <div class="col-12" id="contact">
                        <section>
                            <h2 class="major"><span>Get in touch</span></h2>
                            <ul class="contact">
                                <li><a class="icon brands fa-facebook-f" href="#"><span class="label">Facebook</span></a></li>
                                <li><a class="icon brands fa-twitter" href="#"><span class="label">Twitter</span></a></li>
                                <li><a class="icon brands fa-instagram" href="#"><span class="label">Instagram</span></a></li>
                                <li><a class="icon brands fa-dribbble" href="#"><span class="label">Dribbble</span></a></li>
                                <li><a class="icon brands fa-linkedin-in" href="#"><span class="label">LinkedIn</span></a></li>
                            </ul>
                        </section>
                    </div>
                </div>

                <div id="copyright">
                    <ul class="menu">
                        <li>&copy; Untitled. All rights reserved</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                    </ul>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.dropotron.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Bootstrap & DataTables JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>

    <script>
    function formatDetails(d) {
        return `
        <table class="table table-sm table-borderless mt-2">
            <tr><td class="fw-bold">Machine ID</td><td>${d.Machine_ID}</td></tr>
            <tr><td class="fw-bold">Spindle Speed (RPM)</td><td>${d.Max_Spindle_Speed_RPM}</td></tr>
            <tr><td class="fw-bold">Spindle Power (kW)</td><td>${d.Spindle_Power_kW}</td></tr>
            <tr><td class="fw-bold">Worktable Size</td><td>${d.Worktable_Size_mm}</td></tr>
            <tr><td class="fw-bold">Max Load (kg)</td><td>${d.Max_Load_kg}</td></tr>
            <tr><td class="fw-bold">Year Installed</td><td>${d.Year_Installed}</td></tr>
            <tr><td class="fw-bold">Hours Used</td><td>${d.Hours_Used.toLocaleString()}</td></tr>
        </table>`;
    }

    fetch("/data/tvd-cnc.json")
    .then(res => res.json())
    .then(data => {
        const table = $('#cncTable').DataTable({
            data: data,
            columns: [
                {
                    className: 'dt-control',
                    orderable: false,
                    data: null,
                    defaultContent: '+'
                },
                {
                    data: null,
                    render: function (data) {
                        return `<div class="d-flex align-items-center gap-2">
                                    <img src="${data.Image_URL}" alt="${data.Machine_Name}" style="width:60px; height:40px; object-fit:cover; border-radius:4px; border:1px solid #ccc;">
                                    <div>${data.Machine_Name}</div>
                                </div>`;
                    }
                },
                { data: 'Machine_Type' },
                { data: 'Controller' },
                { data: 'Axis_Count' },
                { data: 'Status' },
                {
                    data: 'Price_THB',
                    render: function (data) {
                        return '฿ ' + data.toLocaleString();
                    }
                }
            ],
            order: [[1, 'asc']],
            lengthMenu: [5, 10, 20, 50],
            pageLength: 10
        });

        $('#cncTable tbody').on('click', 'td.dt-control', function () {
            const tr = $(this).closest('tr');
            const row = table.row(tr);

            if (row.child.isShown()) {
                row.child.hide();
                tr.find('td.dt-control').text('+');
            } else {
                row.child(formatDetails(row.data())).show();
                tr.find('td.dt-control').text('−');
            }
        });
    });
    </script>
</body>
</html>
